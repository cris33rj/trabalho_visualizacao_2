---
toc: false
---

<style> 
    p, li, ol, table, figure, figcaption, h1, h2, h3, h4, h5, h6, .katex-display
    {
        max-width:none;
        text-align: justify;
        margin: 15px 15px;
        text-wrap: pretty;
    }
</style>

# 2.4 - Análise dos tipos de acidentes

### Análise dos tipos de acidentes ocorridos no período e por região.

Esta análise visa responder as seguintes questões:

1) Quais estados concentram a maior taxa de acidentes?
2) Há uma relação entre tamanho do estado e a quantidade de acidentes?
3) Há uma região ou municío específico onde certos tidos de aciednetes ocorrem com maior frequênciaos acidentes?
4) Quais tipos de acidentes são mais relevantes por estado?

Inicialmente cabe verificar a distribuição por estado no número geral de acidentes registrados pela Polícia rodoviário Federal. Assim, disponibilizamos abaixo os mapas **A1**, **A2**, **A3** e **A4**, respectivamente contabilizando os acidentes ocorridos e registrados pela PRF nos anos de 2021, 2022, 2023 e 2024:

<div class="grid grid-cols">
    <div id="ex01" class="card">
        <h4>Acidentes por estado registrados pela PRF ano de 2021.</h4>
        <div style="width: 100%, margin-top: 15px;">
            ${ vl.render(ex01(divWidth-150)) }
        </div>
        <h5>OBS: Ao posicionar o mouse sobre as regiões é possível avaliar os números.</h5>
    </div>
  </div>
  <div class="grid grid-cols">
    <div id="ex02" class="card">
        <h4>Acidentes por estado registrados pela PRF ano de 2022.</h4>
        <div style="width: 100%; margin-top: 15px;">
            ${ vl.render(ex02(divWidth-280)) }
        </div>
        <h5>OBS: Ao posicionar o mouse sobre as regiões é possível avaliar os números.</h5>
    </div>
</div>

Conforme demonstrado acima, vemos sempre a mesma tendência nos mapas dos anos de 2012 a 2024*. Há uma maior concentração no estado de Minas Gerais, seguido por Santa Catarina e Paraná, o que rejeita a tese de que a maior concentração de acidentes tem relação com a extensão territorial do estado.

A mesma tendência pode ser observada numa distribuição comparativa ano a ano nos estados. É poissível notar discrepâncias nos quantitativos, entretanto, a razoabilidade distributiva se mantém no grafico abaixo:



```js
const br_states = await FileAttachment("./data/br_states.json").json({typed: true,});
const acidentes_por_estado = await FileAttachment("./data/acidentes_por_estado.csv").csv({ typed: true });
const acidentes_por_estado2021 = await FileAttachment("./data/acidentes_por_estado2021.csv").csv({ typed: true });
const acidentes_por_estado2022 = await FileAttachment("./data/acidentes_por_estado2022.csv").csv({ typed: true });
const acidentes_por_estado2023 = await FileAttachment("./data/acidentes_por_estado2023.csv").csv({ typed: true });
const acidentes_por_estado2024 = await FileAttachment("./data/acidentes_por_estado2024.csv").csv({ typed: true });
const acidentes_por_estado_21_a_24 = await FileAttachment("./data/acidentes_por_estado_21_a_24.csv").csv({ typed: true });


const datatran2024 = await FileAttachment("./data/datatran2024.json").json({typed: true,});
const datatran2023 = await FileAttachment("./data/datatran2023.json").json({typed: true,});
const datatran2022 = await FileAttachment("./data/datatran2022.json").json({typed: true,});
const datatran2021 = await FileAttachment("./data/datatran2021.json").json({typed: true,});



const brasil_completo = await FileAttachment("./data/brasil_completo.json").json({typed: true,});

const updated_taxa_acidentes_por_municipio = await FileAttachment("./data/updated_taxa_acidentes_por_municipio.csv").csv({  typed: true,});

const divWidth = Generators.width(document.querySelector("#ex01"));

import * as vega from "npm:vega";
import * as vegaLite from "npm:vega-lite";
import * as vegaLiteApi from "npm:vega-lite-api";

const vl = vegaLiteApi.register(vega, vegaLite);


function ex01(divWidth){
  return{
    spec:{
      width: divWidth,
      padding: 15,   
      data:{
        values: datatran2024
      },
      title: "B1",
      "mark":{
          "type": "bar",
          "size": 7,
        },
      "transform":[
        {
          "aggregate":[
            {
              "field": ["causa_acidente"],
              "op": "count", 
              "as": "Nun_acidentes",
            }
          ],
          "groupby": ["causa_acidente","uf"],
        },
        {"filter": "datum.Nun_acidentes >= 100"},
      ],      
      "encoding":{
        "x":{
          "field": ["causa_acidente"],
          "type": "nominal",
          "aggregate": "causa_acidente",
          "sort":{
            "field": "Nun_acidentes",
            "order": "descending"
          },        
          "title": "Nome(s) do(s) Estado(s)", 
          "axis": {"labelAngle": 45}                                 
        },
        tooltip:[
          { field: "uf", type: "nominal", title: "Estado" },
        ],
        "y":{
          "field": ["Nun_acidentes"],
          "type": "quantitative",                    
          "title": "Quantidade de acidentes",    
        },
        "xOffset": {"field": "uf"},
        "color": {"field": "uf", "legend" : { "title": "UF"}}    
      }
    }
  }
}

function ex02(divWidth){
  return{
    spec:{
      width: divWidth,
      padding: 15,   
      data:{
        values: datatran2023
      },
      "title": "B2",
      "mark":{
          "type": "bar",
          "size": 7,
      },
      "transform":[
      {
        "aggregate":[
          {
            "field": ["causa_acidente"],
            "op": "count", 
            "as": "Cont_acidente",
          },
        ],
        "groupby": ["causa_acidente"],
      },
      ],
      "encoding":{
        "x":{
          "aggregate": "count",                   
          "title": "Quantidade de acidentes", 
        },
        "y":{
          "field": ["causa_acidente"],
          "type": "nominal",
          "aggregate": "causa_acidente",
          "sort":{
            "field": "Cont_acidente",
            "order": "ascending"
          },        
          "title": "Tipos de acidentes", 
          "axis": {"labelAngle": 0}                                 
        },
        "tooltip":[
          { "field": "uf", "type": "nominal", "title": "Estado" },
          { "aggregate": "count", "title": "Quantidade de acidentes" },
        ],

         "color": {
          "title": "UF",
          "field": "uf", 
          "scale": {
            "domain":[ "AC","AL","AM","AP","BA","CE","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO" ],
          },
        },  
      },
      selection: 
      {
        Item: 
        {
          type: "multi",
          fields: ["uf"],
          bind: "legend",
        },
      },
      transform: [{ filter: { selection: "Item" } }, ],
    }
  }
}
```
